import{r as e,j as s,L as a}from"./vendor-react-Di3sF8BB.js";import{b as i,u as t}from"./vendor-query-B031p5Or.js";import{h as r,B as l,C as n,n as d,I as c,c as o,o as m,p as x,q as h,i as u,s as g}from"./index-Ba4agNH_.js";import{T as p}from"./textarea-BOM3ltll.js";import{z as j,B as f,E as y,F as v,G as N,J as b}from"./vendor-radix-6DXuBJN5.js";import{L as w}from"./label-CnFGFWne.js";import{S as _}from"./switch-C5BvGJZg.js";import{S as k,a as S,b as q,c as z,d as C}from"./select-DtVDAZoX.js";import{T as L,a as R,b as U,c as F,d as O,e as M}from"./table-DVyzr3Yq.js";import{D as E,b as X,c as A,d as I,e as T,f as B}from"./dialog-DQw_XWPC.js";import{q as H,B as $,a8 as P,p as Q,a9 as W,aa as Y,L as K,m as D,e as G,ab as J,ac as V,ad as Z,ae as ee,af as se,Q as ae,ag as ie,ah as te,ai as re,aj as le,ak as ne,a5 as de,z as ce,D as oe}from"./vendor-icons-CX117ToW.js";import"./vendor-utils-BNexaxpF.js";import"./vendor-supabase-C3HG44mJ.js";const me=e.forwardRef(({className:e,value:a,...i},t)=>s.jsx(j,{ref:t,className:r("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...i,children:s.jsx(f,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));me.displayName=j.displayName;const xe=y,he=e.forwardRef(({className:e,...a},i)=>s.jsx(v,{ref:i,className:r("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));he.displayName=v.displayName;const ue=e.forwardRef(({className:e,...a},i)=>s.jsx(N,{ref:i,className:r("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...a}));ue.displayName=N.displayName;const ge=e.forwardRef(({className:e,...a},i)=>s.jsx(b,{ref:i,className:r("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));ge.displayName=b.displayName;const pe=e=>{const s=[];let a=100;return e.slug?e.slug.length<3?(s.push({type:"warning",message:"URL slug juda qisqa",field:"slug"}),a-=5):s.push({type:"success",message:"URL slug to'g'ri",field:"slug"}):(s.push({type:"error",message:"URL slug mavjud emas",field:"slug"}),a-=15),e.meta_title?e.meta_title.length<30?(s.push({type:"warning",message:"Meta title juda qisqa (30+ belgi tavsiya)",field:"meta_title"}),a-=5):e.meta_title.length>60?(s.push({type:"warning",message:"Meta title juda uzun (60 belgidan kam bo'lsin)",field:"meta_title"}),a-=3):s.push({type:"success",message:"Meta title optimal",field:"meta_title"}):(s.push({type:"warning",message:"Meta title mavjud emas",field:"meta_title"}),a-=5),e.meta_description?e.meta_description.length<70?(s.push({type:"warning",message:"Meta description qisqa (120+ belgi tavsiya)",field:"meta_description"}),a-=5):e.meta_description.length>160?(s.push({type:"warning",message:"Meta description uzun (160 belgidan kam bo'lsin)",field:"meta_description"}),a-=3):s.push({type:"success",message:"Meta description optimal",field:"meta_description"}):(s.push({type:"warning",message:"Meta description mavjud emas",field:"meta_description"}),a-=5),e.images&&0!==e.images.length?e.images.length<3?(s.push({type:"warning",message:`Faqat ${e.images.length} ta rasm (3+ tavsiya)`,field:"images"}),a-=5):s.push({type:"success",message:`${e.images.length} ta rasm mavjud`,field:"images"}):(s.push({type:"error",message:"Mahsulot rasmi yo'q",field:"images"}),a-=20),e.seo_keywords&&0!==e.seo_keywords.length?e.seo_keywords.length<3?(s.push({type:"warning",message:`Faqat ${e.seo_keywords.length} ta kalit so'z (3+ tavsiya)`,field:"seo_keywords"}),a-=5):s.push({type:"success",message:`${e.seo_keywords.length} ta kalit so'z`,field:"seo_keywords"}):(s.push({type:"warning",message:"SEO kalit so'zlar mavjud emas",field:"seo_keywords"}),a-=10),e.short_desc_uz||e.full_desc_uz?e.full_desc_uz?e.full_desc_uz.length<100?(s.push({type:"warning",message:"Tavsif juda qisqa (100+ so'z tavsiya)",field:"description"}),a-=5):s.push({type:"success",message:"Tavsif yetarli",field:"description"}):(s.push({type:"warning",message:"To'liq tavsif mavjud emas",field:"description"}),a-=5):(s.push({type:"error",message:"Tavsif mavjud emas",field:"description"}),a-=15),{...e,score:Math.max(0,Math.min(100,a)),issues:s}},je=()=>{const[r,j]=e.useState(""),[f,y]=e.useState(!1),[v,N]=e.useState(null),[b,je]=e.useState(!1),[fe,ye]=e.useState(null),[ve,Ne]=e.useState(!1),[be,we]=e.useState("audit"),[_e,ke]=e.useState(""),[Se,qe]=e.useState(""),[ze,Ce]=e.useState("weekly"),[Le,Re]=e.useState("1.0"),[Ue,Fe]=e.useState("0.8"),[Oe,Me]=e.useState("0.7"),[Ee,Xe]=e.useState(!0),[Ae,Ie]=e.useState(""),[Te,Be]=e.useState(""),[He,$e]=e.useState(""),[Pe,Qe]=e.useState(""),[We,Ye]=e.useState("0.5"),[Ke,De]=e.useState("weekly"),[Ge,Je]=e.useState(!1);i();const{data:Ve,isLoading:Ze,refetch:es}=t({queryKey:["seo-settings"],queryFn:async()=>{const{data:e,error:s}=await g.from("settings").select("robots_txt, sitemap_base_url, sitemap_change_freq, sitemap_priority_home, sitemap_priority_category, sitemap_priority_product, sitemap_include_images, seo_google_verification, seo_yandex_verification, seo_bing_verification").limit(1).single();if(s)throw s;return e}}),{data:ss,isLoading:as,refetch:is}=t({queryKey:["sitemap-urls"],queryFn:async()=>{const{data:e,error:s}=await g.from("sitemap_urls").select("*").order("created_at",{ascending:!1});if(s)throw s;return e}});e.useEffect(()=>{Ve&&(ke(Ve.robots_txt||""),qe(Ve.sitemap_base_url||"https://premium-market.uz"),Ce(Ve.sitemap_change_freq||"weekly"),Re(String(Ve.sitemap_priority_home||1)),Fe(String(Ve.sitemap_priority_category||.8)),Me(String(Ve.sitemap_priority_product||.7)),Xe(Ve.sitemap_include_images??!0),Ie(Ve.seo_google_verification||""),Be(Ve.seo_yandex_verification||""),$e(Ve.seo_bing_verification||""))},[Ve]);const{data:ts,isLoading:rs,refetch:ls}=t({queryKey:["seo-audit-products"],queryFn:async()=>{const{data:e,error:s}=await g.from("products").select("id, slug, name_uz, meta_title, meta_description, seo_keywords, images, short_desc_uz, full_desc_uz, is_active").order("created_at",{ascending:!1});if(s)throw s;return(e||[]).map(pe)}}),ns=ts?.filter(e=>e.name_uz.toLowerCase().includes(r.toLowerCase())||e.slug?.toLowerCase().includes(r.toLowerCase())),ds={total:ts?.length||0,excellent:ts?.filter(e=>e.score>=90).length||0,good:ts?.filter(e=>e.score>=70&&e.score<90).length||0,needsWork:ts?.filter(e=>e.score>=50&&e.score<70).length||0,poor:ts?.filter(e=>e.score<50).length||0,avgScore:ts?.length?Math.round(ts.reduce((e,s)=>e+s.score,0)/ts.length):0,needsSEO:ts?.filter(e=>!e.meta_title||!e.meta_description||!e.seo_keywords?.length).length||0},cs=async()=>{Ne(!0);try{const{error:e}=await g.from("settings").update({robots_txt:_e,sitemap_base_url:Se,sitemap_change_freq:ze,sitemap_priority_home:parseFloat(Le),sitemap_priority_category:parseFloat(Ue),sitemap_priority_product:parseFloat(Oe),sitemap_include_images:Ee,seo_google_verification:Ae,seo_yandex_verification:Te,seo_bing_verification:He}).not("id","is",null);if(e)throw e;u.success("SEO sozlamalari saqlandi!"),es()}catch(e){u.error("Xatolik yuz berdi")}finally{Ne(!1)}},os=async()=>{y(!0);try{const{error:e}=await g.functions.invoke("ping-google",{body:{sitemapUrl:`${Se}/sitemap.xml`}});if(e)throw e;u.success("Google, Yandex va Bing xabardor qilindi!")}catch(e){u.error("Xatolik yuz berdi")}finally{y(!1)}},ms=e=>e>=90?"text-green-600 dark:text-green-400":e>=70?"text-yellow-600 dark:text-yellow-400":e>=50?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400",xs=`https://kpoohymkthraujwdruau.supabase.co/functions/v1/sitemap?base_url=${encodeURIComponent(Se)}`;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"SEO Boshqaruvi"}),s.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Sitemap, robots.txt va SEO sozlamalari"})]})}),s.jsxs(xe,{value:be,onValueChange:we,children:[s.jsxs(he,{className:"grid w-full grid-cols-4",children:[s.jsxs(ue,{value:"audit",className:"gap-2",children:[s.jsx(H,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Audit"})]}),s.jsxs(ue,{value:"robots",className:"gap-2",children:[s.jsx($,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Robots.txt"})]}),s.jsxs(ue,{value:"sitemap",className:"gap-2",children:[s.jsx(P,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sitemap"})]}),s.jsxs(ue,{value:"verification",className:"gap-2",children:[s.jsx(Q,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Verification"})]})]}),s.jsxs(ge,{value:"audit",className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[s.jsxs(l,{variant:"outline",onClick:()=>ls(),children:[s.jsx(W,{className:"h-4 w-4 mr-2"}),"Yangilash"]}),s.jsxs(l,{onClick:os,disabled:f,variant:"outline",children:[f?s.jsx(W,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(Y,{className:"h-4 w-4 mr-2"}),"Google Ping"]}),s.jsxs(l,{onClick:()=>(async(e=!1)=>{je(!0);try{const{data:s,error:a}=await g.functions.invoke("seo-generator",{body:{mode:"batch",applyChanges:e}});if(a)throw a;const i=s?.results?.filter(e=>e.applied)?.length||0,t=s?.results?.length||0;e?(u.success(`${i} ta mahsulot SEO si yangilandi!`),ls()):u.info(`${t} ta mahsulot uchun taklif yaratildi`)}catch(s){s.message?.includes("Rate limit")?u.error("Juda ko'p so'rov. Biroz kutib turing."):u.error("AI xatolik yuz berdi")}finally{je(!1)}})(!0),disabled:b||0===ds.needsSEO,className:"bg-gradient-to-r from-primary to-accent",children:[b?s.jsx(K,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(H,{className:"h-4 w-4 mr-2"}),"AI Batch (",ds.needsSEO,")"]})]}),s.jsx(n,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-accent/5",children:s.jsx(d,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 rounded-full bg-primary/10",children:s.jsx(H,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"AI SEO Optimallashtirish"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Har bir mahsulot uchun AI yordamida meta title, description va kalit so'zlar yarating."}),s.jsx("div",{className:"flex items-center gap-4 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(D,{className:"h-4 w-4"}),s.jsx("span",{children:"Cron job: Har soatda avtomatik tekshiriladi"})]})})]})]})})}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[s.jsx(n,{children:s.jsx(d,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-foreground",children:[ds.avgScore,"%"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"O'rtacha ball"})]})})}),s.jsx(n,{children:s.jsx(d,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:ds.excellent}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"A'lo (90%+)"})]})})}),s.jsx(n,{children:s.jsx(d,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:ds.good}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Yaxshi (70-89%)"})]})})}),s.jsx(n,{children:s.jsx(d,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-orange-600",children:ds.needsWork}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"O'rtacha (50-69%)"})]})})}),s.jsx(n,{children:s.jsx(d,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-red-600",children:ds.poor}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Yomon (<50%)"})]})})}),s.jsx(n,{className:"border-primary/30",children:s.jsx(d,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-primary",children:ds.needsSEO}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"SEO kerak"})]})})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(c,{placeholder:"Mahsulot qidirish...",value:r,onChange:e=>j(e.target.value),className:"pl-10"})]}),rs?s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,a)=>s.jsx("div",{className:"h-32 bg-muted animate-pulse rounded-lg"},a))}):s.jsx("div",{className:"space-y-4",children:ns?.map(e=>{return s.jsx(n,{className:"overflow-hidden",children:s.jsx(d,{className:"p-0",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:`p-6 flex flex-col items-center justify-center min-w-[120px] ${i=e.score,i>=90?"bg-green-500":i>=70?"bg-yellow-500":i>=50?"bg-orange-500":"bg-red-500"} bg-opacity-10`,children:[s.jsx("div",{className:`text-4xl font-bold ${ms(e.score)}`,children:e.score}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"SEO Ball"}),s.jsx(me,{value:e.score,className:"w-20 h-2 mt-2"})]}),s.jsxs("div",{className:"flex-1 p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-foreground",children:e.name_uz}),e.slug?s.jsxs("a",{href:`${Se}/product/${e.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:[s.jsx(J,{className:"h-3 w-3"}),"/product/",e.slug]}):s.jsx("span",{className:"text-sm text-destructive",children:"URL mavjud emas"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(l,{variant:"outline",size:"sm",onClick:()=>(async(e,s=!1)=>{N(e);try{const{data:a,error:i}=await g.functions.invoke("seo-generator",{body:{productId:e,mode:"single",applyChanges:s}});if(i)throw i;if(a?.results?.[0]){const e=a.results[0];s?(u.success("SEO yangilandi!"),ls()):ye(e)}}catch(a){a.message?.includes("Rate limit")?u.error("Juda ko'p so'rov. Biroz kutib turing."):a.message?.includes("Payment")?u.error("Kredit tugadi. Lovable AI hisobingizni to'ldiring."):u.error("AI xatolik yuz berdi")}finally{N(null)}})(e.id),disabled:v===e.id,children:v===e.id?s.jsx(K,{className:"h-4 w-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(V,{className:"h-4 w-4 mr-1"}),"AI"]})}),s.jsx(a,{to:"/panel/products",children:s.jsx(l,{variant:"outline",size:"sm",children:"Tahrirlash"})})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:e.issues.map((e,a)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm p-2 rounded-lg "+("error"===e.type?"bg-destructive/10 text-destructive":"warning"===e.type?"bg-warning/10 text-warning":"bg-success/10 text-success"),children:["error"===e.type?s.jsx(Z,{className:"h-4 w-4 flex-shrink-0"}):"warning"===e.type?s.jsx(ee,{className:"h-4 w-4 flex-shrink-0"}):s.jsx(se,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.message})]},a))}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[s.jsxs(o,{variant:"outline",className:"gap-1",children:[s.jsx(ae,{className:"h-3 w-3"}),e.images?.length||0," rasm"]}),s.jsxs(o,{variant:"outline",className:"gap-1",children:[s.jsx(ie,{className:"h-3 w-3"}),e.seo_keywords?.length||0," kalit so'z"]}),s.jsxs(o,{variant:"outline",className:"gap-1",children:[s.jsx(te,{className:"h-3 w-3"}),e.meta_title?"Meta ✓":"Meta ✗"]})]})]})]})})},e.id);var i})}),0===ns?.length&&!rs&&s.jsx(n,{children:s.jsx(d,{className:"py-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Mahsulot topilmadi"})})})]}),s.jsxs(ge,{value:"robots",className:"space-y-6 mt-6",children:[s.jsxs(n,{children:[s.jsxs(m,{children:[s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx($,{className:"h-5 w-5"}),"Robots.txt Sozlamalari"]}),s.jsx(h,{children:"Qidiruv botlari uchun sayt xaritasi va ko'rsatmalar"})]}),s.jsxs(d,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs(l,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(_e),u.success("Nusxalandi!")},children:[s.jsx(re,{className:"h-4 w-4 mr-2"}),"Nusxalash"]}),s.jsxs(l,{variant:"outline",size:"sm",onClick:()=>{const e=new Blob([_e],{type:"text/plain"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="robots.txt",a.click(),URL.revokeObjectURL(s),u.success("Yuklab olindi!")},children:[s.jsx(le,{className:"h-4 w-4 mr-2"}),"Yuklab olish"]}),s.jsx("a",{href:`${Se}/robots.txt`,target:"_blank",rel:"noopener noreferrer",children:s.jsxs(l,{variant:"outline",size:"sm",children:[s.jsx(Y,{className:"h-4 w-4 mr-2"}),"Ko'rish"]})})]}),s.jsx(p,{value:_e,onChange:e=>ke(e.target.value),placeholder:"# Robots.txt mazmuni...",className:"font-mono text-sm min-h-[400px]"}),s.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2 text-sm",children:"Qo'llanma:"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsxs("li",{children:[s.jsx("code",{className:"bg-muted px-1 rounded",children:"User-agent: *"})," - Barcha botlar uchun"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-muted px-1 rounded",children:"Allow: /"})," - Ruxsat berish"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-muted px-1 rounded",children:"Disallow: /admin"})," - Taqiqlash"]}),s.jsxs("li",{children:[s.jsx("code",{className:"bg-muted px-1 rounded",children:"Sitemap: URL"})," - Sitemap manzili"]})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(l,{onClick:cs,disabled:ve,children:[ve?s.jsx(K,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(ne,{className:"h-4 w-4 mr-2"}),"Saqlash"]})})]}),s.jsxs(ge,{value:"sitemap",className:"space-y-6 mt-6",children:[s.jsxs(n,{children:[s.jsxs(m,{children:[s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(P,{className:"h-5 w-5"}),"Sitemap Sozlamalari"]}),s.jsx(h,{children:"XML sitemap yaratish sozlamalari"})]}),s.jsxs(d,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"baseUrl",children:"Asosiy URL"}),s.jsx(c,{id:"baseUrl",value:Se,onChange:e=>qe(e.target.value),placeholder:"https://example.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"changeFreq",children:"O'zgarish chastotasi"}),s.jsxs(k,{value:ze,onValueChange:Ce,children:[s.jsx(S,{children:s.jsx(q,{})}),s.jsxs(z,{children:[s.jsx(C,{value:"always",children:"Doimo"}),s.jsx(C,{value:"hourly",children:"Har soatda"}),s.jsx(C,{value:"daily",children:"Har kuni"}),s.jsx(C,{value:"weekly",children:"Har hafta"}),s.jsx(C,{value:"monthly",children:"Har oy"}),s.jsx(C,{value:"yearly",children:"Har yil"}),s.jsx(C,{value:"never",children:"Hech qachon"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"Prioritetlar"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"priorityHome",children:"Bosh sahifa (0.0-1.0)"}),s.jsx(c,{id:"priorityHome",type:"number",min:"0",max:"1",step:"0.1",value:Le,onChange:e=>Re(e.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"priorityCategory",children:"Kategoriyalar (0.0-1.0)"}),s.jsx(c,{id:"priorityCategory",type:"number",min:"0",max:"1",step:"0.1",value:Ue,onChange:e=>Fe(e.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"priorityProduct",children:"Mahsulotlar (0.0-1.0)"}),s.jsx(c,{id:"priorityProduct",type:"number",min:"0",max:"1",step:"0.1",value:Oe,onChange:e=>Me(e.target.value)})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_,{id:"includeImages",checked:Ee,onCheckedChange:Xe}),s.jsx(w,{htmlFor:"includeImages",children:"Rasmlarni sitemap ga qo'shish"})]}),s.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[s.jsxs("h4",{className:"font-medium mb-2 text-sm flex items-center gap-2",children:[s.jsx(de,{className:"h-4 w-4"}),"Sitemap URL"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"text-sm bg-background px-3 py-2 rounded flex-1 overflow-x-auto",children:xs}),s.jsx(l,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(xs),u.success("Nusxalandi!")},children:s.jsx(re,{className:"h-4 w-4"})}),s.jsx("a",{href:xs,target:"_blank",rel:"noopener noreferrer",children:s.jsx(l,{variant:"outline",size:"sm",children:s.jsx(Y,{className:"h-4 w-4"})})})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(l,{onClick:os,disabled:f,variant:"outline",children:[f?s.jsx(W,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(Y,{className:"h-4 w-4 mr-2"}),"Qidiruv tizimlariga xabar berish"]})})]})]}),s.jsxs(n,{children:[s.jsxs(m,{children:[s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(ce,{className:"h-5 w-5"}),"Maxsus URL'lar"]}),s.jsx(h,{children:"Sitemap'ga qo'shimcha sahifalar qo'shing"})]}),s.jsxs(d,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-4 items-end",children:[s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(w,{htmlFor:"newUrl",children:"URL"}),s.jsx(c,{id:"newUrl",value:Pe,onChange:e=>Qe(e.target.value),placeholder:"/blog/my-article"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"newUrlPriority",children:"Prioritet"}),s.jsx(c,{id:"newUrlPriority",type:"number",min:"0",max:"1",step:"0.1",value:We,onChange:e=>Ye(e.target.value)})]}),s.jsxs(l,{onClick:async()=>{if(Pe.trim()){Je(!0);try{const{error:e}=await g.from("sitemap_urls").insert({url:Pe.startsWith("/")?Pe:`/${Pe}`,priority:parseFloat(We),changefreq:Ke});if(e)throw e;u.success("URL qo'shildi!"),Qe(""),Ye("0.5"),De("weekly"),is()}catch(e){u.error("Xatolik yuz berdi")}finally{Je(!1)}}else u.error("URL kiriting")},disabled:Ge,children:[Ge?s.jsx(K,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(ce,{className:"h-4 w-4 mr-2"}),"Qo'shish"]})]}),as?s.jsx("div",{className:"h-32 bg-muted animate-pulse rounded-lg"}):ss&&ss.length>0?s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(L,{children:[s.jsx(R,{children:s.jsxs(U,{children:[s.jsx(F,{children:"URL"}),s.jsx(F,{className:"w-24",children:"Prioritet"}),s.jsx(F,{className:"w-32",children:"Chastota"}),s.jsx(F,{className:"w-24",children:"Holat"}),s.jsx(F,{className:"w-24",children:"Amallar"})]})}),s.jsx(O,{children:ss.map(e=>s.jsxs(U,{children:[s.jsx(M,{className:"font-mono text-sm",children:e.url}),s.jsx(M,{children:e.priority}),s.jsx(M,{children:e.changefreq}),s.jsx(M,{children:s.jsx(_,{checked:e.is_active,onCheckedChange:()=>(async(e,s)=>{try{const{error:a}=await g.from("sitemap_urls").update({is_active:!s}).eq("id",e);if(a)throw a;u.success(s?"URL o'chirildi":"URL yoqildi"),is()}catch(a){u.error("Xatolik yuz berdi")}})(e.id,e.is_active)})}),s.jsx(M,{children:s.jsx(l,{variant:"ghost",size:"sm",onClick:()=>(async e=>{try{const{error:s}=await g.from("sitemap_urls").delete().eq("id",e);if(s)throw s;u.success("URL o'chirildi!"),is()}catch(s){u.error("Xatolik yuz berdi")}})(e.id),className:"text-destructive hover:text-destructive",children:s.jsx(oe,{className:"h-4 w-4"})})})]},e.id))})]})}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Hozircha maxsus URL'lar yo'q"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(l,{onClick:cs,disabled:ve,children:[ve?s.jsx(K,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(ne,{className:"h-4 w-4 mr-2"}),"Saqlash"]})})]}),s.jsxs(ge,{value:"verification",className:"space-y-6 mt-6",children:[s.jsxs(n,{children:[s.jsxs(m,{children:[s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(Q,{className:"h-5 w-5"}),"Sayt Tasdiqlash"]}),s.jsx(h,{children:"Qidiruv tizimlari uchun tasdiqlash kodlari"})]}),s.jsxs(d,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"google",children:"Google Search Console"}),s.jsx(c,{id:"google",value:Ae,onChange:e=>Ie(e.target.value),placeholder:"google-site-verification=XXXX"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Google Search Console dan olingan tasdiqlash kodi"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"yandex",children:"Yandex Webmaster"}),s.jsx(c,{id:"yandex",value:Te,onChange:e=>Be(e.target.value),placeholder:"yandex-verification=XXXX"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Yandex Webmaster dan olingan tasdiqlash kodi"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(w,{htmlFor:"bing",children:"Bing Webmaster"}),s.jsx(c,{id:"bing",value:He,onChange:e=>$e(e.target.value),placeholder:"msvalidate.01=XXXX"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Bing Webmaster Tools dan olingan tasdiqlash kodi"})]}),s.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2 text-sm",children:"Qo'llanma:"}),s.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Qidiruv tizimi webmaster sahifasiga kiring"}),s.jsx("li",{children:'"HTML tag" yoki "meta tag" tasdiqlash usulini tanlang'}),s.jsx("li",{children:"Berilgan kodni bu yerga kiriting"}),s.jsx("li",{children:"Saqlash tugmasini bosing"}),s.jsx("li",{children:"Webmaster sahifasida tasdiqlashni yakunlang"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(l,{onClick:cs,disabled:ve,children:[ve?s.jsx(K,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(ne,{className:"h-4 w-4 mr-2"}),"Saqlash"]})})]})]}),s.jsx(E,{open:!!fe,onOpenChange:()=>ye(null),children:s.jsxs(X,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(A,{children:[s.jsxs(I,{className:"flex items-center gap-2",children:[s.jsx(H,{className:"h-5 w-5 text-primary"}),"AI SEO Taklifi"]}),s.jsxs(T,{children:[fe?.productName," uchun AI tomonidan yaratilgan SEO taklifi"]})]}),fe&&s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Meta Title"}),fe.current.meta_title&&s.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 text-sm",children:[s.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Hozirgi:"}),fe.current.meta_title]}),s.jsxs("div",{className:"p-3 rounded-lg bg-primary/10 border border-primary/20 text-sm",children:[s.jsx("span",{className:"text-xs text-primary block mb-1",children:"AI Taklifi:"}),fe.suggested.meta_title,s.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",fe.suggested.meta_title.length," belgi)"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Meta Description"}),fe.current.meta_description&&s.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 text-sm",children:[s.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"Hozirgi:"}),fe.current.meta_description]}),s.jsxs("div",{className:"p-3 rounded-lg bg-primary/10 border border-primary/20 text-sm",children:[s.jsx("span",{className:"text-xs text-primary block mb-1",children:"AI Taklifi:"}),fe.suggested.meta_description,s.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",fe.suggested.meta_description.length," belgi)"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Kalit so'zlar"}),fe.current.seo_keywords&&fe.current.seo_keywords.length>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[s.jsx("span",{className:"text-xs text-muted-foreground block mb-2",children:"Hozirgi:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:fe.current.seo_keywords.map((e,a)=>s.jsx(o,{variant:"secondary",className:"text-xs",children:e},a))})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-primary/10 border border-primary/20",children:[s.jsx("span",{className:"text-xs text-primary block mb-2",children:"AI Taklifi (birlashtirilgan):"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:fe.suggested.seo_keywords.map((e,a)=>s.jsx(o,{variant:"default",className:"text-xs",children:e},a))})]})]})]}),s.jsxs(B,{children:[s.jsx(l,{variant:"outline",onClick:()=>ye(null),children:"Bekor qilish"}),s.jsxs(l,{onClick:async()=>{if(fe)try{const{error:e}=await g.from("products").update({meta_title:fe.suggested.meta_title,meta_description:fe.suggested.meta_description,seo_keywords:fe.suggested.seo_keywords}).eq("id",fe.productId);if(e)throw e;u.success("SEO yangilandi!"),ye(null),ls()}catch(e){u.error("Xatolik yuz berdi")}},children:[s.jsx(se,{className:"h-4 w-4 mr-2"}),"Qo'llash"]})]})]})})]})};export{je as default};
