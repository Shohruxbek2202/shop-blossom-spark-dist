import{r as e,j as a,o as s,u as r,f as t,L as i}from"./vendor-react-Di3sF8BB.js";import{b as l,u as n,c as o}from"./vendor-query-B031p5Or.js";import{h as d,B as c,c as m,u,t as x,L as h,S as p,I as g,P as b,i as f,j,s as y,k as N}from"./index-Ba4agNH_.js";import{T as v}from"./textarea-BOM3ltll.js";import{P as w}from"./phone-input-Cw-wqaaE.js";import{v as k,w as q,H as _,x as z,y as S}from"./vendor-radix-6DXuBJN5.js";import{s as $,X as C,t as I,u as B,C as P,v as L,n as K,o as M,p as F,w as T,c as U,S as D,U as E,L as R,k as A,P as H,x as O}from"./vendor-icons-CX117ToW.js";import{B as V}from"./BreadcrumbNav-LvkZYVfj.js";import"./vendor-utils-BNexaxpF.js";import"./vendor-supabase-C3HG44mJ.js";const Y=k,X=e.forwardRef(({className:e,...s},r)=>a.jsx(q,{ref:r,className:d("border-b",e),...s}));X.displayName="AccordionItem";const Z=e.forwardRef(({className:e,children:s,...r},t)=>a.jsx(_,{className:"flex",children:a.jsxs(z,{ref:t,className:d("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[s,a.jsx($,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Z.displayName=z.displayName;const Q=e.forwardRef(({className:e,children:s,...r},t)=>a.jsx(S,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:a.jsx("div",{className:d("pb-4 pt-0",e),children:s})}));Q.displayName=S.displayName;const W=({src:s,alt:r,className:t,priority:i=!1})=>{const[l,n]=e.useState(i),[o,c]=e.useState(i),m=e.useRef(null);e.useEffect(()=>{if(i||!m.current)return void c(!0);const e=new IntersectionObserver(([a])=>{a.isIntersecting&&(c(!0),e.disconnect())},{rootMargin:"50px",threshold:.01});return e.observe(m.current),()=>e.disconnect()},[i]);return a.jsx("img",{ref:m,src:o?(u=s,!u||u.includes("placeholder")?u:u.includes("supabase.co/storage")?`${u}?width=800&quality=80&format=webp`:u):void 0,"data-src":s,alt:r,loading:i?"eager":"lazy",decoding:i?"sync":"async",fetchPriority:i?"high":"auto",onLoad:()=>n(!0),className:d("transition-opacity duration-300",l?"opacity-100":"opacity-0",t)});var u},G=({images:s,videoUrl:r,youtubeUrl:t,productName:i,discount:l=0})=>{const[n,o]=e.useState(0),[u,x]=e.useState(!1),[h,p]=e.useState(!1),g=Boolean(r||t),b=s||[],f=g?b.length:-1,j=b.length+(g?1:0),y=g&&n===f,N=b[0]||"/placeholder.svg",v=t?(e=>{const a=e.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([^&\s]+)/);return a?`https://www.youtube.com/embed/${a[1]}`:null})(t):null;return a.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[a.jsxs("div",{className:"relative w-full max-w-[400px] mx-auto sm:max-w-none aspect-square overflow-hidden rounded-lg bg-secondary",children:[y?u?a.jsxs("div",{className:"w-full h-full relative bg-black",children:[a.jsx(c,{variant:"ghost",size:"icon",className:"absolute right-2 top-2 z-20 bg-black/60 text-white hover:bg-black/80 h-8 w-8 touch-manipulation rounded-full",onClick:()=>{x(!1),p(!1)},"aria-label":"Videoni yopish",children:a.jsx(C,{className:"h-4 w-4"})}),!h&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-0",children:a.jsx("div",{className:"w-8 h-8 border-3 border-primary border-t-transparent rounded-full animate-spin"})}),v?a.jsx("iframe",{src:`${v}?autoplay=1&rel=0&modestbranding=1&playsinline=1`,className:"w-full h-full",allowFullScreen:!0,loading:"lazy",onLoad:()=>p(!0),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",title:`${i} video`}):r?a.jsx("video",{src:r,controls:!0,autoPlay:!0,playsInline:!0,preload:"auto",onLoadedData:()=>p(!0),onCanPlay:()=>p(!0),className:"w-full h-full object-contain"}):null]}):a.jsxs("div",{className:"w-full h-full cursor-pointer group relative touch-manipulation",onClick:()=>{x(!0)},children:[a.jsx(W,{src:N,alt:"Video thumbnail",className:"w-full h-full object-cover",priority:!0}),a.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center group-active:bg-black/40 transition-colors",children:a.jsx("div",{className:"p-3 sm:p-4 rounded-full bg-primary text-primary-foreground shadow-lg group-hover:scale-105 group-active:scale-95 transition-transform",children:a.jsx(I,{className:"h-6 w-6 sm:h-8 sm:w-8 fill-current"})})})]}):a.jsx(W,{src:b[n]||"/placeholder.svg",alt:i,className:"w-full h-full object-cover",priority:0===n}),l>0&&!u&&a.jsxs(m,{className:"absolute left-2 top-2 z-10 gradient-primary text-primary-foreground text-xs sm:text-sm px-2 py-0.5",children:["-",l,"%"]}),j>1&&!u&&a.jsxs(a.Fragment,{children:[a.jsx(c,{variant:"secondary",size:"icon",className:"absolute left-1 top-1/2 -translate-y-1/2 z-10 bg-background/80 backdrop-blur-sm h-8 w-8 sm:h-10 sm:w-10 touch-manipulation",onClick:()=>{o(e=>e>0?e-1:j-1),x(!1)},"aria-label":"Oldingi rasm",children:a.jsx(B,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),a.jsx(c,{variant:"secondary",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 z-10 bg-background/80 backdrop-blur-sm h-8 w-8 sm:h-10 sm:w-10 touch-manipulation",onClick:()=>{o(e=>e<j-1?e+1:0),x(!1)},"aria-label":"Keyingi rasm",children:a.jsx(P,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),j>1&&a.jsxs("div",{className:"flex justify-center gap-1.5 sm:gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[b.map((e,s)=>a.jsx("button",{onClick:()=>{o(s),x(!1)},"aria-label":`${i} rasm ${s+1}`,className:d("flex-shrink-0 w-14 h-14 sm:w-16 sm:h-16 rounded-lg overflow-hidden border-2 transition-all touch-manipulation",n===s?"border-primary ring-2 ring-primary/30":"border-border hover:border-primary/50"),children:a.jsx(W,{src:e,alt:`${i} ${s+1}`,className:"w-full h-full object-cover"})},`img-${s}`)),g&&a.jsxs("button",{onClick:()=>{o(f),x(!1)},"aria-label":`${i} video`,className:d("flex-shrink-0 w-14 h-14 sm:w-16 sm:h-16 rounded-lg overflow-hidden border-2 transition-all relative touch-manipulation",n===f?"border-primary ring-2 ring-primary/30":"border-border hover:border-primary/50"),children:[a.jsx(W,{src:N,alt:"Video",className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:a.jsx("div",{className:"p-1 rounded-full bg-white/90",children:a.jsx(I,{className:"h-3 w-3 sm:h-4 sm:w-4 text-black fill-black"})})})]})]})]})},J=[{question:"Yetkazib berish qancha vaqt oladi?",answer:"Toshkent bo'ylab 1-2 kun ichida, viloyatlarga 3-5 kun ichida yetkazib beramiz. Bepul yetkazib berish barcha buyurtmalar uchun amal qiladi."},{question:"Mahsulotni qaytarish mumkinmi?",answer:"Ha, 14 kun ichida sababsiz qaytarish mumkin. Mahsulot original holatda bo'lishi kerak."},{question:"To'lov qanday amalga oshiriladi?",answer:"Naqd pul, bank kartasi (Uzcard, Humo, Visa, Mastercard) va Click/Payme orqali to'lash mumkin. Yetkazib berishda ham to'lash mumkin."},{question:"Kafolat bormi?",answer:"Ha, barcha mahsulotlarimiz sifat kafolatiga ega. Nuqsonli mahsulot topilsa, almashtiriladi yoki pul qaytariladi."}],ee=()=>{const{id:m}=s(),{t:k}=r(),{currentLanguage:q}=u(),_=l(),z=t(),[S,$]=e.useState(""),[C,I]=e.useState(""),[B,P]=e.useState(!1),[W,ee]=e.useState(!1),[ae,se]=e.useState(5),[re,te]=e.useState(""),[ie,le]=e.useState(""),{data:ne}=n({queryKey:["settings-product"],queryFn:async()=>{const{data:e}=await y.rpc("get_public_settings");return e?.[0]||null}}),{data:oe,isLoading:de}=n({queryKey:["product",m],queryFn:async()=>{const e=m,{data:a}=await y.from("products").select("*, categories(*)").eq("slug",e).maybeSingle();if(a)return await y.from("products").update({view_count:(a.view_count||0)+1}).eq("id",a.id),a;const{data:s}=await y.from("products").select("*, categories(*)").eq("id",e).maybeSingle();return s&&await y.from("products").update({view_count:(s.view_count||0)+1}).eq("id",s.id),s},enabled:!!m}),{data:ce}=n({queryKey:["reviews",oe?.id],queryFn:async()=>{const{data:e}=await y.from("reviews").select("*").eq("product_id",oe?.id).eq("is_approved",!0).order("created_at",{ascending:!1});return e||[]},enabled:!!oe?.id}),{data:me}=n({queryKey:["similar-products",oe?.category_id],queryFn:async()=>{const{data:e}=await y.from("products").select("*").eq("category_id",oe?.category_id).neq("id",oe?.id).eq("is_active",!0).limit(4);return e||[]},enabled:!!oe?.category_id}),{data:ue}=n({queryKey:["weekly-orders",oe?.id],queryFn:async()=>{const e=new Date;e.setDate(e.getDate()-7);const{count:a}=await y.from("orders").select("*",{count:"exact",head:!0}).eq("product_id",oe?.id).gte("created_at",e.toISOString());return a||0},enabled:!!oe?.id}),xe=o({mutationFn:async()=>{const e=ie.trim();if(!e)throw new Error("Name required");const{error:a}=await y.from("reviews").insert({product_id:oe?.id,user_id:null,user_name:e,rating:ae,comment:re});if(a)throw a},onSuccess:()=>{f.success("Sharhingiz yuborildi va tasdiqlanishi kutilmoqda"),te(""),se(5),le(""),_.invalidateQueries({queryKey:["reviews",oe?.id]})},onError:()=>{f.error("Xatolik yuz berdi")}}),he=e=>{if(!oe)return"";return oe[`${e}_${q}`]||""};e.useEffect(()=>{oe&&x({id:oe.id,name:he("name"),price:oe.sale_price||oe.price,category:oe.categories?.name_uz})},[oe?.id]);if(de)return a.jsx(h,{children:a.jsx("div",{className:"container py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx("div",{className:"aspect-square bg-secondary animate-pulse rounded-2xl"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-8 bg-secondary animate-pulse rounded"}),a.jsx("div",{className:"h-6 bg-secondary animate-pulse rounded w-1/2"}),a.jsx("div",{className:"h-24 bg-secondary animate-pulse rounded"})]})]})})});if(!oe)return a.jsxs(h,{children:[a.jsx(p,{title:"Mahsulot topilmadi",noIndex:!0}),a.jsxs("div",{className:"container py-8 text-center",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Mahsulot topilmadi"}),a.jsx(i,{to:"/catalog",children:a.jsx(c,{children:k("catalog")})})]})]});const pe=oe.sale_price?Math.round((oe.price-oe.sale_price)/oe.price*100):0,ge=he("name"),be=he("short_desc")||he("full_desc"),fe="https://premium-market.uz",je=oe.meta_description||`${ge} - ${(oe.sale_price||oe.price).toLocaleString()} so'm. ${be?.slice(0,120)||""} Premium Market'da xarid qiling!`,ye=[{name:"Bosh sahifa",url:fe},{name:"Katalog",url:`${fe}/catalog`},...oe.categories?[{name:oe.categories.name_uz,url:`${fe}/catalog?category=${oe.category_id}`}]:[],{name:ge}];return a.jsxs(h,{children:[a.jsx(p,{title:oe.meta_title||`${ge} - Premium Market | Sotib olish`,description:je,keywords:oe.seo_keywords||[ge,"premium market","sotib olish","xarid",oe.categories?.name_uz].filter(Boolean),image:oe.images?.[0],type:"product",url:`${fe}/product/${oe.slug||oe.id}`,breadcrumbs:ye,faqs:J,product:{name:ge,price:oe.price,salePrice:oe.sale_price||void 0,currency:"UZS",availability:"InStock",image:oe.images?.[0],images:oe.images||void 0,description:be,category:oe.categories?.name_uz,categorySlug:oe.category_id,rating:oe.rating||void 0,reviewCount:oe.review_count||void 0,brand:"Premium Market",sku:oe.id}}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/20",children:[a.jsxs("div",{className:"container max-w-4xl mx-auto py-4 px-4",children:[a.jsx(V,{items:[{name:"Katalog",url:"/catalog"},...oe.categories?[{name:oe.categories.name_uz,url:`/catalog?category=${oe.category_id}`}]:[],{name:ge}],className:"mb-4"}),a.jsx("div",{className:"mb-6",children:a.jsx(G,{images:oe.images||[],videoUrl:oe.video_url,youtubeUrl:oe.youtube_url,productName:ge,discount:pe})}),a.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg border border-border mb-6",children:[ue&&ue>0&&a.jsxs("div",{className:"inline-flex items-center gap-2 text-success bg-success/10 px-3 py-1.5 rounded-full mb-4",children:[a.jsx(L,{className:"h-4 w-4"}),a.jsxs("span",{className:"text-sm font-semibold",children:["Bu hafta ",ue," ta buyurtma"]})]}),a.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-3 text-foreground",children:ge}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"flex items-center",children:[...Array(5)].map((e,s)=>a.jsx(K,{className:d("h-5 w-5",s<Math.floor(oe.rating||0)?"fill-warning text-warning":"fill-muted text-muted")},s))}),a.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",oe.review_count||0," ",k("reviews"),")"]})]}),a.jsx("div",{className:"flex items-center gap-4 mb-4",children:oe.sale_price?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-primary",children:[oe.sale_price.toLocaleString()," so'm"]}),a.jsxs("span",{className:"text-xl text-muted-foreground line-through",children:[oe.price.toLocaleString()," so'm"]}),a.jsxs("span",{className:"bg-destructive text-destructive-foreground px-2 py-1 rounded-md text-sm font-bold",children:["-",pe,"%"]})]}):a.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-foreground",children:[oe.price.toLocaleString()," so'm"]})}),be&&a.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:be}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-xl",children:[a.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(M,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"Yetkazib berish"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"1-3 kun ichida"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-xl",children:[a.jsx("div",{className:"w-10 h-10 bg-success/10 rounded-full flex items-center justify-center",children:a.jsx(F,{className:"h-5 w-5 text-success"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"Kafolat"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sifat kafolati"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-xl",children:[a.jsx("div",{className:"w-10 h-10 bg-warning/10 rounded-full flex items-center justify-center",children:a.jsx(T,{className:"h-5 w-5 text-warning"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"To'lov"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Naqd / Karta"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-xl",children:[a.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(U,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"Tekshirish"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Olishda tekshiring"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(U,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:k("inStock")})]})]}),a.jsx("div",{className:"bg-card rounded-2xl p-6 shadow-lg border border-border mb-6",id:"order-form",children:W?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-success/20 flex items-center justify-center mx-auto mb-4",children:a.jsx(U,{className:"h-8 w-8 text-success"})}),a.jsx("h2",{className:"text-xl font-bold mb-2 text-success",children:"Buyurtmangiz qabul qilindi!"}),a.jsx("p",{className:"text-muted-foreground mb-6",children:"Tez orada operatorlarimiz siz bilan bog'lanishadi"}),ne?.telegram_link&&a.jsxs("a",{href:ne.telegram_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-[#0088cc] text-white rounded-xl font-medium hover:bg-[#0077b5] transition-colors",children:[a.jsx(D,{className:"h-5 w-5"}),"Telegram kanalga o'tish"]}),a.jsx(c,{variant:"outline",className:"w-full mt-4",onClick:()=>ee(!1),children:"Yana buyurtma berish"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx(L,{className:"h-5 w-5 text-primary"}),"Buyurtma berish"]}),a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!oe)return;const a=C.replace(/\D/g,"");if(a.length<9||a.length>12)return void f.error("Telefon raqamini to'g'ri kiriting (9-12 ta raqam)");const s=a.startsWith("998")?`+${a}`:`+998${a}`;P(!0);const r=Number(oe.sale_price)||Number(oe.price)||0;if(r<=0)return f.error("Mahsulot narxi noto'g'ri"),void P(!1);try{j({value:r,currency:"UZS",ids:[oe.id],numItems:1});const{data:e,error:a}=await y.functions.invoke("process-order",{body:{customerName:S.trim()||"Xaridor",customerPhone:s,productId:oe.id,quantity:1,totalPrice:r,productName:he("name"),streamLink:oe.stream_link}});if(a)throw new Error(a.message||"Buyurtma yuborishda xatolik");if(e&&!e.success)throw new Error(e.error||"Buyurtma yuborishda xatolik");N({orderId:oe.id,value:r,currency:"UZS",contentIds:[oe.id],numItems:1}),z(`/thank-you?product=${encodeURIComponent(he("name"))}`),$(""),I("")}catch(t){f.error("Xatolik yuz berdi. Qaytadan urinib ko'ring.")}finally{P(!1)}},className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground z-10"}),a.jsx(g,{placeholder:"Ismingiz",value:S,onChange:e=>$(e.target.value),className:"pl-10 h-12 text-base rounded-xl"})]}),a.jsx(w,{value:C,onChange:I,required:!0}),a.jsx(c,{type:"submit",size:"lg",className:"w-full h-14 text-lg font-bold rounded-xl bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-lg",disabled:B||!C.trim(),children:B?a.jsxs(a.Fragment,{children:[a.jsx(R,{className:"h-5 w-5 mr-2 animate-spin"}),"Yuborilmoqda..."]}):"Buyurtma berish"}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Buyurtma bergach, operator siz bilan bog'lanadi"})]})]})}),a.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg border border-border mb-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Aloqa"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(A,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-muted-foreground",children:ne?.address||"Toshkent, O'zbekiston"})]}),ne?.contact_phone&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(H,{className:"h-5 w-5 text-primary"}),a.jsx("a",{href:`tel:${ne.contact_phone}`,className:"text-muted-foreground hover:text-foreground",children:ne.contact_phone})]}),ne?.telegram_link&&a.jsxs("a",{href:ne.telegram_link,target:"_blank",rel:"noopener noreferrer","aria-label":"Telegram orqali bog'lanish",className:"inline-flex items-center gap-2 text-[#0066a1] dark:text-[#4db3e6] hover:underline font-medium",children:[a.jsx(D,{className:"h-5 w-5"}),"Telegram orqali bog'lanish"]})]})]}),he("full_desc")&&a.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg border border-border mb-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:k("description")}),a.jsx("div",{className:"prose prose-neutral dark:prose-invert max-w-none",children:a.jsx("p",{className:"whitespace-pre-wrap text-muted-foreground leading-relaxed",children:he("full_desc")})})]}),a.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg border border-border mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx(O,{className:"h-5 w-5 text-primary"}),"Ko'p beriladigan savollar"]}),a.jsx(Y,{type:"single",collapsible:!0,className:"w-full",children:J.map((e,s)=>a.jsxs(X,{value:`faq-${s}`,children:[a.jsx(Z,{className:"text-left",children:e.question}),a.jsx(Q,{className:"text-muted-foreground",children:e.answer})]},s))})]}),a.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-lg border border-border mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[a.jsx(K,{className:"h-5 w-5 text-warning fill-warning"}),k("reviews")," (",ce?.length||0,")"]}),a.jsxs("div",{className:"bg-muted/30 rounded-xl p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-3 text-sm",children:k("writeReview")}),a.jsx(g,{placeholder:"Ismingiz",value:ie,onChange:e=>le(e.target.value),className:"mb-3 rounded-xl"}),a.jsx("div",{className:"flex items-center gap-1 mb-3",children:[...Array(5)].map((e,s)=>a.jsx("button",{onClick:()=>se(s+1),type:"button","aria-label":`${s+1} yulduz baho`,children:a.jsx(K,{className:d("h-6 w-6 cursor-pointer transition-colors",s<ae?"fill-warning text-warning":"text-muted-foreground")})},s))}),a.jsx(v,{placeholder:"Sharhingizni yozing...",value:re,onChange:e=>te(e.target.value),className:"mb-3 rounded-xl",rows:3}),a.jsx(c,{onClick:()=>xe.mutate(),disabled:xe.isPending||!ie.trim(),className:"rounded-xl",children:k("submit")})]}),a.jsx("div",{className:"space-y-4",children:ce&&ce.length>0?ce.map(e=>a.jsxs("div",{className:"border-b border-border pb-4 last:border-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-medium",children:e.user_name}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),a.jsx("div",{className:"flex items-center gap-1 mb-2",children:[...Array(5)].map((s,r)=>a.jsx(K,{className:d("h-4 w-4",r<e.rating?"fill-warning text-warning":"fill-muted text-muted")},r))}),e.comment&&a.jsx("p",{className:"text-muted-foreground text-sm",children:e.comment})]},e.id)):a.jsx("p",{className:"text-muted-foreground text-center py-4 text-sm",children:"Hali sharhlar yo'q. Birinchi bo'lib sharh qoldiring!"})})]}),me&&me.length>0&&a.jsxs("section",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:k("similarProducts")}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:me.map(e=>a.jsx(b,{product:e},e.id))})]})]}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/95 backdrop-blur-md border-t border-border md:hidden z-40",children:a.jsx(c,{size:"lg",className:"w-full h-14 text-lg font-bold rounded-xl bg-gradient-to-r from-primary to-primary/80 shadow-lg",onClick:()=>document.getElementById("order-form")?.scrollIntoView({behavior:"smooth"}),children:"Buyurtma berish"})}),a.jsx("div",{className:"h-24 md:hidden"})]})]})};export{ee as default};
