import{r as e,p as a,j as r,N as s,L as t,O as n}from"./vendor-react-Di3sF8BB.js";import{m as i,i as o,B as l,h as c}from"./index-Ba4agNH_.js";import{X as d,i as u,K as m,N as p,O as h,h as b,Q as x,R as g,e as f,V as j,W as v}from"./vendor-icons-CX117ToW.js";import"./vendor-radix-6DXuBJN5.js";import"./vendor-utils-BNexaxpF.js";import"./vendor-query-B031p5Or.js";import"./vendor-supabase-C3HG44mJ.js";const y=[{path:"/panel",icon:m,label:"Dashboard"},{path:"/panel/products",icon:p,label:"Mahsulotlar"},{path:"/panel/categories",icon:h,label:"Kategoriyalar"},{path:"/panel/orders",icon:b,label:"Buyurtmalar"},{path:"/panel/banners",icon:x,label:"Bannerlar"},{path:"/panel/reviews",icon:g,label:"Izohlar"},{path:"/panel/seo-audit",icon:f,label:"SEO Audit"},{path:"/panel/settings",icon:j,label:"Sozlamalar"}],N=()=>{const{user:m,isAdmin:p,loading:h,adminReady:b,adminVerified:x,signOut:g}=i(),f=a(),[j,N]=e.useState(!1);return(({timeoutMinutes:a=30,warningMinutes:r=2}={})=>{const{signOut:s,user:t}=i(),n=e.useRef(null),l=e.useRef(null),c=e.useRef(!1),d=60*a*1e3,u=60*(a-r)*1e3,m=e.useCallback(async()=>{o.error("30 daqiqa faoliyatsizlik sababli sessiya tugadi",{description:"Iltimos, qayta kiring",duration:5e3}),await s()},[s]),p=e.useCallback(()=>{c.current||(c.current=!0,o.warning(`Sessiya ${r} daqiqada tugaydi`,{description:"Faoliyat davom ettiring yoki qayta kiring",duration:1e4}))},[r]),h=e.useCallback(()=>{n.current&&clearTimeout(n.current),l.current&&clearTimeout(l.current),c.current=!1,l.current=setTimeout(p,u),n.current=setTimeout(m,d)},[m,p,d,u]);e.useEffect(()=>{if(!t)return;const e=["mousedown","mousemove","keydown","scroll","touchstart","click"];let a=Date.now();const r=()=>{const e=Date.now();e-a>1e3&&(a=e,h())};return e.forEach(e=>{document.addEventListener(e,r,{passive:!0})}),h(),()=>{e.forEach(e=>{document.removeEventListener(e,r)}),n.current&&clearTimeout(n.current),l.current&&clearTimeout(l.current)}},[t,h])})({timeoutMinutes:30,warningMinutes:2}),h||m&&!b?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):m&&p&&x?r.jsxs("div",{className:"min-h-screen bg-muted/30",children:[r.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-background border-b border-border px-4 py-3 flex items-center justify-between",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>N(!j),children:j?r.jsx(d,{className:"h-5 w-5"}):r.jsx(u,{className:"h-5 w-5"})}),r.jsx("span",{className:"font-semibold text-foreground",children:"Admin Panel"}),r.jsx("div",{className:"w-10"})]}),j&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>N(!1)}),r.jsxs("aside",{className:c("fixed top-0 left-0 z-50 h-full w-64 bg-background border-r border-border transform transition-transform duration-200 ease-in-out lg:translate-x-0",j?"translate-x-0":"-translate-x-full"),children:[r.jsx("div",{className:"p-6 border-b border-border",children:r.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Admin Panel"})}),r.jsx("nav",{className:"p-4 space-y-1",children:y.map(e=>{const a=f.pathname===e.path;return r.jsxs(t,{to:e.path,onClick:()=>N(!1),className:c("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[r.jsx(e.icon,{className:"h-5 w-5"}),r.jsx("span",{children:e.label})]},e.path)})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-border",children:r.jsxs(l,{variant:"ghost",className:"w-full justify-start gap-3 text-muted-foreground hover:text-foreground",onClick:g,children:[r.jsx(v,{className:"h-5 w-5"}),"Chiqish"]})})]}),r.jsx("main",{className:"lg:ml-64 min-h-screen pt-16 lg:pt-0",children:r.jsx("div",{className:"p-6",children:r.jsx(n,{})})})]}):r.jsx(s,{to:"/panel/login",replace:!0})};export{N as default};
