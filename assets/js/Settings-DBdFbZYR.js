import{r as e,j as a}from"./vendor-react-Di3sF8BB.js";import{b as s,u as i,c as l}from"./vendor-query-B031p5Or.js";import{C as r,o as n,p as t,q as d,n as c,I as o,B as m,i as h,s as g}from"./index-DztaS-sJ.js";import{L as x}from"./label-CY7WyAhe.js";import{a6 as j,S as _,a7 as u,a8 as v}from"./vendor-icons-UB6tg7n9.js";import"./vendor-radix-AkGGdVjm.js";import"./vendor-utils-BNexaxpF.js";import"./vendor-supabase-CKi7xGwz.js";const p=()=>{const p=s(),[k,y]=e.useState({site_name:"",logo_url:"",contact_phone:"",contact_email:"",address:"",api_key:"",telegram_bot_token:"",telegram_chat_id:"",telegram_link:"",instagram_link:"",facebook_link:"",ga4_id:"",gtm_id:"",yandex_metrika_id:"",meta_pixel_id:""}),{data:f,isLoading:b}=i({queryKey:["settings"],queryFn:async()=>{const{data:e,error:a}=await g.from("settings").select("*").maybeSingle();if(a)throw a;return e}});e.useEffect(()=>{f&&y({site_name:f.site_name||"",logo_url:f.logo_url||"",contact_phone:f.contact_phone||"",contact_email:f.contact_email||"",address:f.address||"",api_key:f.api_key||"",telegram_bot_token:f.telegram_bot_token||"",telegram_chat_id:f.telegram_chat_id||"",telegram_link:f.telegram_link||"",instagram_link:f.instagram_link||"",facebook_link:f.facebook_link||"",ga4_id:f.ga4_id||"",gtm_id:f.gtm_id||"",yandex_metrika_id:f.yandex_metrika_id||"",meta_pixel_id:f.meta_pixel_id||""})},[f]);const N=l({mutationFn:async e=>{if(f?.id){const{error:a}=await g.from("settings").update(e).eq("id",f.id);if(a)throw a}else{const{error:a}=await g.from("settings").insert(e);if(a)throw a}},onSuccess:()=>{p.invalidateQueries({queryKey:["settings"]}),h.success("Sozlamalar saqlandi")},onError:()=>{h.error("Xatolik yuz berdi")}});return b?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Sozlamalar"}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(r,{children:[a.jsxs(n,{children:[a.jsxs(t,{className:"flex items-center gap-2",children:[a.jsx(j,{className:"h-5 w-5"}),"Umumiy sozlamalar"]}),a.jsx(d,{children:"Sayt nomi, logo va kontakt ma'lumotlari"})]}),a.jsxs(c,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(x,{children:"Sayt nomi"}),a.jsx(o,{value:k.site_name,onChange:e=>y({...k,site_name:e.target.value})})]}),a.jsxs("div",{children:[a.jsx(x,{children:"Logo URL"}),a.jsx(o,{value:k.logo_url,onChange:e=>y({...k,logo_url:e.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(x,{children:"Telefon raqam"}),a.jsx(o,{value:k.contact_phone,onChange:e=>y({...k,contact_phone:e.target.value})})]}),a.jsxs("div",{children:[a.jsx(x,{children:"Email"}),a.jsx(o,{value:k.contact_email,onChange:e=>y({...k,contact_email:e.target.value})})]})]}),a.jsxs("div",{children:[a.jsx(x,{children:"Manzil"}),a.jsx(o,{value:k.address,onChange:e=>y({...k,address:e.target.value}),placeholder:"Toshkent, O'zbekiston"})]})]})]}),a.jsxs(r,{children:[a.jsxs(n,{children:[a.jsxs(t,{className:"flex items-center gap-2",children:[a.jsx(_,{className:"h-5 w-5"}),"Ijtimoiy tarmoqlar"]}),a.jsx(d,{children:"Telegram, Instagram va Facebook havolalari"})]}),a.jsx(c,{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(x,{children:"Telegram havola"}),a.jsx(o,{value:k.telegram_link,onChange:e=>y({...k,telegram_link:e.target.value}),placeholder:"https://t.me/username"})]}),a.jsxs("div",{children:[a.jsx(x,{children:"Instagram havola"}),a.jsx(o,{value:k.instagram_link,onChange:e=>y({...k,instagram_link:e.target.value}),placeholder:"https://instagram.com/username"})]}),a.jsxs("div",{children:[a.jsx(x,{children:"Facebook havola"}),a.jsx(o,{value:k.facebook_link,onChange:e=>y({...k,facebook_link:e.target.value}),placeholder:"https://facebook.com/page"})]})]})})]}),a.jsxs(r,{children:[a.jsxs(n,{children:[a.jsxs(t,{className:"flex items-center gap-2",children:[a.jsx(u,{className:"h-5 w-5"}),"API sozlamalari"]}),a.jsx(d,{children:"Buyurtmalarni yuborish uchun API kalit"})]}),a.jsx(c,{children:a.jsxs("div",{children:[a.jsx(x,{children:"API Key (mgoods.uz)"}),a.jsx(o,{value:k.api_key,onChange:e=>y({...k,api_key:e.target.value}),placeholder:"API kalitingizni kiriting"})]})})]}),a.jsxs(r,{children:[a.jsxs(n,{children:[a.jsxs(t,{className:"flex items-center gap-2",children:[a.jsx(_,{className:"h-5 w-5"}),"Telegram bot"]}),a.jsx(d,{children:"Yangi buyurtmalar haqida Telegram ga xabar yuborish"})]}),a.jsxs(c,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(x,{children:"Bot Token"}),a.jsx(o,{value:k.telegram_bot_token,onChange:e=>y({...k,telegram_bot_token:e.target.value}),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"})]}),a.jsxs("div",{children:[a.jsx(x,{children:"Chat ID"}),a.jsx(o,{value:k.telegram_chat_id,onChange:e=>y({...k,telegram_chat_id:e.target.value}),placeholder:"-1001234567890"})]})]})]}),a.jsxs(r,{children:[a.jsxs(n,{children:[a.jsxs(t,{className:"flex items-center gap-2",children:[a.jsx(v,{className:"h-5 w-5"}),"Analitika"]}),a.jsx(d,{children:"Google, Yandex va Meta analitika identifikatorlari"})]}),a.jsxs(c,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(x,{children:"Google Tag Manager ID"}),a.jsx(o,{value:k.gtm_id,onChange:e=>y({...k,gtm_id:e.target.value}),placeholder:"GTM-XXXXXXX"})]}),a.jsxs("div",{children:[a.jsx(x,{children:"Google Analytics 4 ID"}),a.jsx(o,{value:k.ga4_id,onChange:e=>y({...k,ga4_id:e.target.value}),placeholder:"G-XXXXXXXXXX"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(x,{children:"Yandex Metrika ID"}),a.jsx(o,{value:k.yandex_metrika_id,onChange:e=>y({...k,yandex_metrika_id:e.target.value}),placeholder:"12345678"})]}),a.jsxs("div",{children:[a.jsx(x,{children:"Meta Pixel ID"}),a.jsx(o,{value:k.meta_pixel_id,onChange:e=>y({...k,meta_pixel_id:e.target.value}),placeholder:"1234567890123456"})]})]})]})]}),a.jsx(m,{onClick:()=>N.mutate(k),disabled:N.isPending,className:"w-full md:w-auto",children:N.isPending?"Saqlanmoqda...":"Saqlash"})]})]})};export{p as default};
